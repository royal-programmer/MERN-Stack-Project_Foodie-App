{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\tenys\\\\OneDrive\\\\Desktop\\\\WSA Project\\\\mern-stack_food-app\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"C:\\\\Users\\\\tenys\\\\OneDrive\\\\Desktop\\\\WSA Project\\\\mern-stack_food-app\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport { ALL_RESTAURANTS_REQUEST, ALL_RESTAURANTS_SUCCESS, ALL_RESTAURANTS_FAIL, TOGGLE_VEG_ONLY, SORT_BY_RATINGS, SORT_BY_REVIEWS, CLEAR_ERRORS } from \"../constants/restaurantConstant\";\nvar initialState = {\n  restaurants: []\n};\nexport var restaurantReducer = function restaurantReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case ALL_RESTAURANTS_REQUEST:\n      return _objectSpread({}, state, {\n        loading: true,\n        error: null\n      });\n    case ALL_RESTAURANTS_SUCCESS:\n      return _objectSpread({}, state, {\n        loading: false,\n        count: action.payload.count,\n        restaurants: action.payload\n      });\n    case ALL_RESTAURANTS_FAIL:\n      return _objectSpread({}, state, {\n        loading: false,\n        error: action.payload\n      });\n    case TOGGLE_VEG_ONLY:\n      return _objectSpread({}, state, {\n        showVegOnly: !state.showVegOnly,\n        pureVegRestaurantsCount: calculatePureVegCount(state.restaurants.restaurants, !state.showVegOnly)\n      });\n    case SORT_BY_RATINGS:\n      return _objectSpread({}, state, {\n        restaurants: _objectSpread({}, state.restaurants, {\n          restaurants: _toConsumableArray(state.restaurants.restaurants).sort(function (a, b) {\n            return b.ratings - a.ratings;\n          })\n        })\n      });\n    case SORT_BY_REVIEWS:\n      return _objectSpread({}, state, {\n        restaurants: _objectSpread({}, state.restaurants, {\n          restaurants: _toConsumableArray(state.restaurants.restaurants).sort(function (a, b) {\n            return b.numOfReviews - a.numOfReviews;\n          })\n        })\n      });\n    case CLEAR_ERRORS:\n      return _objectSpread({}, state, {\n        error: null\n      });\n    default:\n      return state;\n  }\n};\nvar calculatePureVegCount = function calculatePureVegCount(restaurants, showVegOnly) {\n  if (!showVegOnly) {\n    return restaurantReducer.length;\n  } else {\n    return restaurants.filter(function (restaurant) {\n      return restaurant.isVeg;\n    }).length;\n  }\n};","map":{"version":3,"names":["ALL_RESTAURANTS_REQUEST","ALL_RESTAURANTS_SUCCESS","ALL_RESTAURANTS_FAIL","TOGGLE_VEG_ONLY","SORT_BY_RATINGS","SORT_BY_REVIEWS","CLEAR_ERRORS","initialState","restaurants","restaurantReducer","state","arguments","length","undefined","action","type","_objectSpread","loading","error","count","payload","showVegOnly","pureVegRestaurantsCount","calculatePureVegCount","_toConsumableArray","sort","a","b","ratings","numOfReviews","filter","restaurant","isVeg"],"sources":["C:/Users/tenys/OneDrive/Desktop/WSA Project/mern-stack_food-app/Frontend/src/reducers/restaurantReducer.js"],"sourcesContent":["import {\r\n  ALL_RESTAURANTS_REQUEST,\r\n  ALL_RESTAURANTS_SUCCESS,\r\n  ALL_RESTAURANTS_FAIL,\r\n  TOGGLE_VEG_ONLY,\r\n  SORT_BY_RATINGS,\r\n  SORT_BY_REVIEWS,\r\n  CLEAR_ERRORS,\r\n} from \"../constants/restaurantConstant\";\r\n\r\nconst initialState = {\r\n  restaurants: [],\r\n};\r\n\r\nexport const restaurantReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ALL_RESTAURANTS_REQUEST:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n        error: null,\r\n      };\r\n    case ALL_RESTAURANTS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        count : action.payload.count,\r\n        restaurants: action.payload,\r\n      };\r\n    case ALL_RESTAURANTS_FAIL:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.payload,\r\n      };\r\n    case TOGGLE_VEG_ONLY:\r\n      return {\r\n        ...state,\r\n        showVegOnly: !state.showVegOnly,\r\n        pureVegRestaurantsCount: calculatePureVegCount(\r\n          state.restaurants.restaurants,\r\n          !state.showVegOnly\r\n        ),\r\n      };\r\n    case SORT_BY_RATINGS:\r\n      return {\r\n        ...state,\r\n        restaurants: {\r\n          ...state.restaurants,\r\n          restaurants: [...state.restaurants.restaurants].sort(\r\n            (a, b) => b.ratings - a.ratings\r\n          ),\r\n        },\r\n      };\r\n    case SORT_BY_REVIEWS:\r\n      return {\r\n        ...state,\r\n        restaurants: {\r\n          ...state.restaurants,\r\n          restaurants: [...state.restaurants.restaurants].sort(\r\n            (a, b) => b.numOfReviews - a.numOfReviews\r\n          ),\r\n        },\r\n      };\r\n    case CLEAR_ERRORS:\r\n      return {\r\n        ...state,\r\n        error: null,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst calculatePureVegCount = (restaurants, showVegOnly) => {\r\n  if (!showVegOnly) {\r\n    return restaurantReducer.length;\r\n  } else {\r\n    return restaurants.filter((restaurant) => restaurant.isVeg).length;\r\n  }\r\n};\r\n"],"mappings":";;AAAA,SACEA,uBAAuB,EACvBC,uBAAuB,EACvBC,oBAAoB,EACpBC,eAAe,EACfC,eAAe,EACfC,eAAe,EACfC,YAAY,QACP,iCAAiC;AAExC,IAAMC,YAAY,GAAG;EACnBC,WAAW,EAAE;AACf,CAAC;AAED,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAA,EAAqC;EAAA,IAAjCC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGJ,YAAY;EAAA,IAAEO,MAAM,GAAAH,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAC5D,QAAQC,MAAM,CAACC,IAAI;IACjB,KAAKf,uBAAuB;MAC1B,OAAAgB,aAAA,KACKN,KAAK;QACRO,OAAO,EAAE,IAAI;QACbC,KAAK,EAAE;MAAI;IAEf,KAAKjB,uBAAuB;MAC1B,OAAAe,aAAA,KACKN,KAAK;QACRO,OAAO,EAAE,KAAK;QACdE,KAAK,EAAGL,MAAM,CAACM,OAAO,CAACD,KAAK;QAC5BX,WAAW,EAAEM,MAAM,CAACM;MAAO;IAE/B,KAAKlB,oBAAoB;MACvB,OAAAc,aAAA,KACKN,KAAK;QACRO,OAAO,EAAE,KAAK;QACdC,KAAK,EAAEJ,MAAM,CAACM;MAAO;IAEzB,KAAKjB,eAAe;MAClB,OAAAa,aAAA,KACKN,KAAK;QACRW,WAAW,EAAE,CAACX,KAAK,CAACW,WAAW;QAC/BC,uBAAuB,EAAEC,qBAAqB,CAC5Cb,KAAK,CAACF,WAAW,CAACA,WAAW,EAC7B,CAACE,KAAK,CAACW,WACT;MAAC;IAEL,KAAKjB,eAAe;MAClB,OAAAY,aAAA,KACKN,KAAK;QACRF,WAAW,EAAAQ,aAAA,KACNN,KAAK,CAACF,WAAW;UACpBA,WAAW,EAAEgB,kBAAA,CAAId,KAAK,CAACF,WAAW,CAACA,WAAW,EAAEiB,IAAI,CAClD,UAACC,CAAC,EAAEC,CAAC;YAAA,OAAKA,CAAC,CAACC,OAAO,GAAGF,CAAC,CAACE,OAAO;UAAA,CACjC;QAAC;MACF;IAEL,KAAKvB,eAAe;MAClB,OAAAW,aAAA,KACKN,KAAK;QACRF,WAAW,EAAAQ,aAAA,KACNN,KAAK,CAACF,WAAW;UACpBA,WAAW,EAAEgB,kBAAA,CAAId,KAAK,CAACF,WAAW,CAACA,WAAW,EAAEiB,IAAI,CAClD,UAACC,CAAC,EAAEC,CAAC;YAAA,OAAKA,CAAC,CAACE,YAAY,GAAGH,CAAC,CAACG,YAAY;UAAA,CAC3C;QAAC;MACF;IAEL,KAAKvB,YAAY;MACf,OAAAU,aAAA,KACKN,KAAK;QACRQ,KAAK,EAAE;MAAI;IAEf;MACE,OAAOR,KAAK;EAChB;AACF,CAAC;AAED,IAAMa,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAIf,WAAW,EAAEa,WAAW,EAAK;EAC1D,IAAI,CAACA,WAAW,EAAE;IAChB,OAAOZ,iBAAiB,CAACG,MAAM;EACjC,CAAC,MAAM;IACL,OAAOJ,WAAW,CAACsB,MAAM,CAAC,UAACC,UAAU;MAAA,OAAKA,UAAU,CAACC,KAAK;IAAA,EAAC,CAACpB,MAAM;EACpE;AACF,CAAC"},"metadata":{},"sourceType":"module"}